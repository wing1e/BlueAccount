{"version":3,"file":"time-chain.js","sources":["utils/time-chain.js"],"sourcesContent":["import { getWeek } from \"./get-date\";\r\n\r\nexport const timeChain = (targetDate, dateType, chainType) => {\r\n    let date;\r\n    // 根据不同格式的 targetDate 创建 Date 对象\r\n    if(typeof targetDate === 'object' && targetDate.start && targetDate.end) {\r\n        date = new Date(targetDate.start);\r\n\t\tconsole.log('origin:'+date.toLocaleDateString());\r\n    }else if (targetDate.includes('-')) {\r\n        if (targetDate.split('-').length === 2) {\r\n            // 处理 'YYYY-MM' 格式\r\n            const [year, month] = targetDate.split('-');\r\n            date = new Date(year, month - 1);\r\n        } else {\r\n            // 处理 'YYYY-MM-DD' 格式\r\n            date = new Date(targetDate);\r\n        }\r\n    } else {\r\n        // 处理 'YYYY' 格式\r\n        date = new Date(targetDate, 0);\r\n    }\r\n\r\n    // 根据日期类型和链类型计算新日期\r\n    if (dateType === 3) { // 日\r\n        const offset = chainType === 'last' ? -1 : 1;\r\n        date.setDate(date.getDate() + offset);\r\n    }else if (dateType === 2) { // 周\r\n\t\tconst day = new Date(getWeek(date).start).getDate()\r\n        date.setDate(day); // 设置日期为当前周的第一天\r\n        const offset = chainType === 'last'? -1 : 1;\r\n        date.setDate(date.getDate() + offset * 7); // 调整日期到上一周或下一周\r\n\t\t\r\n    } else if (dateType === 1) { // 月\r\n        const offset = chainType === 'last' ? -1 : 1;\r\n        date.setMonth(date.getMonth() + offset);\r\n    } else if (dateType === 0) { // 年\r\n        const offset = chainType === 'last' ? -1 : 1;\r\n        date.setFullYear(date.getFullYear() + offset);\r\n    }\r\n\r\n    // 根据日期类型格式化返回结果\r\n    if (dateType === 3) {\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        return `${year}-${month}-${day}`;\r\n    }else if (dateType === 2) {\r\n        const {start,end} = getWeek(date);\r\n        return {start:start,end:end};\r\n\r\n    }else if (dateType === 1) {\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        return `${year}-${month}`;\r\n    } else if (dateType === 0) {\r\n        return String(date.getFullYear());\r\n    }\r\n\r\n\treturn targetDate;\r\n};"],"names":["uni","getWeek"],"mappings":";;;AAEY,MAAC,YAAY,CAAC,YAAY,UAAU,cAAc;AAC1D,MAAI;AAEJ,MAAG,OAAO,eAAe,YAAY,WAAW,SAAS,WAAW,KAAK;AACrE,WAAO,IAAI,KAAK,WAAW,KAAK;AACtCA,kBAAY,MAAA,MAAA,OAAA,4BAAA,YAAU,KAAK,mBAAkB,CAAE;AAAA,EAC5C,WAAS,WAAW,SAAS,GAAG,GAAG;AAChC,QAAI,WAAW,MAAM,GAAG,EAAE,WAAW,GAAG;AAEpC,YAAM,CAAC,MAAM,KAAK,IAAI,WAAW,MAAM,GAAG;AAC1C,aAAO,IAAI,KAAK,MAAM,QAAQ,CAAC;AAAA,IAC3C,OAAe;AAEH,aAAO,IAAI,KAAK,UAAU;AAAA,IAC7B;AAAA,EACT,OAAW;AAEH,WAAO,IAAI,KAAK,YAAY,CAAC;AAAA,EAChC;AAGD,MAAI,aAAa,GAAG;AAChB,UAAM,SAAS,cAAc,SAAS,KAAK;AAC3C,SAAK,QAAQ,KAAK,QAAS,IAAG,MAAM;AAAA,EAC5C,WAAc,aAAa,GAAG;AAC5B,UAAM,MAAM,IAAI,KAAKC,cAAAA,QAAQ,IAAI,EAAE,KAAK,EAAE,QAAS;AAC7C,SAAK,QAAQ,GAAG;AAChB,UAAM,SAAS,cAAc,SAAQ,KAAK;AAC1C,SAAK,QAAQ,KAAK,QAAO,IAAK,SAAS,CAAC;AAAA,EAEhD,WAAe,aAAa,GAAG;AACvB,UAAM,SAAS,cAAc,SAAS,KAAK;AAC3C,SAAK,SAAS,KAAK,SAAU,IAAG,MAAM;AAAA,EAC9C,WAAe,aAAa,GAAG;AACvB,UAAM,SAAS,cAAc,SAAS,KAAK;AAC3C,SAAK,YAAY,KAAK,YAAa,IAAG,MAAM;AAAA,EAC/C;AAGD,MAAI,aAAa,GAAG;AAChB,UAAM,OAAO,KAAK;AAClB,UAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,UAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,WAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,EACtC,WAAc,aAAa,GAAG;AACtB,UAAM,EAAC,OAAM,IAAG,IAAIA,cAAO,QAAC,IAAI;AAChC,WAAO,EAAC,OAAY,IAAO;AAAA,EAEnC,WAAc,aAAa,GAAG;AACtB,UAAM,OAAO,KAAK;AAClB,UAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,WAAO,GAAG,IAAI,IAAI,KAAK;AAAA,EAC/B,WAAe,aAAa,GAAG;AACvB,WAAO,OAAO,KAAK,YAAW,CAAE;AAAA,EACnC;AAEJ,SAAO;AACR;;"}